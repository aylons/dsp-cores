########################################
#  This file was generated by hdlmake  #
#  http://ohwr.org/projects/hdl-make/  #
########################################

PROJECT := bpm_dsp_example.xise
ISE_CRAP := *.b bpm_dsp_example_summary.html *.tcl bpm_dsp_example.bld bpm_dsp_example.cmd_log *.drc bpm_dsp_example.lso *.ncd bpm_dsp_example.ngc bpm_dsp_example.ngd bpm_dsp_example.ngr bpm_dsp_example.pad bpm_dsp_example.par bpm_dsp_example.pcf bpm_dsp_example.prj bpm_dsp_example.ptwx bpm_dsp_example.stx bpm_dsp_example.syr bpm_dsp_example.twr bpm_dsp_example.twx bpm_dsp_example.gise bpm_dsp_example.unroutes bpm_dsp_example.ut bpm_dsp_example.xpi bpm_dsp_example.xst bpm_dsp_example_bitgen.xwbt bpm_dsp_example_envsettings.html bpm_dsp_example_guide.ncd bpm_dsp_example_map.map bpm_dsp_example_map.mrp bpm_dsp_example_map.ncd bpm_dsp_example_map.ngm bpm_dsp_example_map.xrpt bpm_dsp_example_ngdbuild.xrpt bpm_dsp_example_pad.csv bpm_dsp_example_pad.txt bpm_dsp_example_par.xrpt bpm_dsp_example_summary.xml bpm_dsp_example_usage.xml bpm_dsp_example_xst.xrpt usage_statistics_webtalk.html webtalk.log webtalk_pn.xml run.tcl

#target for performing local synthesis
local:
		echo "project open $(PROJECT)" > run.tcl
		echo "process run {Generate Programming File} -force rerun_all" >> run.tcl
		xtclsh run.tcl


#target for cleaing all intermediate stuff
clean:
		rm -f $(ISE_CRAP)
		rm -rf xst xlnx_auto_*_xdb iseconfig _xmsgs _ngo

#target for cleaning final files
mrproper:
		rm -f *.bit *.bin *.mcs

USER:=$(HDLMAKE_USER)#take the value from the environment
SERVER:=$(HDLMAKE_SERVER)#take the value from the environment
R_NAME:=bpm_dsp_example

__test_for_remote_synthesis_variables:
ifeq (x$(USER),x)
	@echo "Remote synthesis user is not set. You can set it by editing variable USER in the makefile." && false
endif
ifeq (x$(SERVER),x)
	@echo "Remote synthesis server is not set. You can set it by editing variable SERVER in the makefile." && false
endif

CWD := $(shell pwd)

FILES := ../../../top/ml605/bpm_dsp_example/dbe_bpm_dsp.vhd \
../../../top/ml605/bpm_dsp_example/signal_gen.vhd \
../../../top/ml605/bpm_dsp_example/beam_position_gen.vhd \
../../../top/ml605/bpm_dsp_example/sys_pll.vhd \
../../../top/ml605/bpm_dsp_example/clk_gen.vhd \
../../../top/ml605/bpm_dsp_example/dbe_bpm_dsp.ucf \
../../../modules/dsp_cores_pkg.vhd \
../../../modules/position_calc/position_calc.vhd \
../../../modules/wb_position_calc/xwb_position_calc_core.vhd \
../../../modules/wb_position_calc/wb_position_calc_core.vhd \
../../../modules/wb_position_calc/position_calc_core_pkg.vhd \
../../../modules/wb_position_calc/position_calc_cdc_fifo.vhd \
../../../modules/wb_un_cross/wb_bpm_swap.vhd \
../../../modules/wb_un_cross/xwb_bpm_swap.vhd \
../../../modules/wb_un_cross/wbgen/xbpm_swap_regs_pkg.vhd \
../../../modules/wb_un_cross/wbgen/wb_bpm_swap_regs.vhd \
../../../modules/position_calc/generated/virtex6/addsb_11_0_239e4f614ba09ab1.ngc \
../../../modules/position_calc/generated/virtex6/addsb_11_0_239e4f614ba09ab1.vhd \
../../../modules/position_calc/generated/virtex6/addsb_11_0_26986301a9f671cd.ngc \
../../../modules/position_calc/generated/virtex6/addsb_11_0_26986301a9f671cd.vhd \
../../../modules/position_calc/generated/virtex6/addsb_11_0_8b0747970e52f130.ngc \
../../../modules/position_calc/generated/virtex6/addsb_11_0_8b0747970e52f130.vhd \
../../../modules/position_calc/generated/virtex6/cc_cmplr_v3_0_0f9a053cdbbdc75e.ngc \
../../../modules/position_calc/generated/virtex6/cc_cmplr_v3_0_0f9a053cdbbdc75e.vhd \
../../../modules/position_calc/generated/virtex6/cc_cmplr_v3_0_59fbd17f7e62a7fe.ngc \
../../../modules/position_calc/generated/virtex6/cc_cmplr_v3_0_59fbd17f7e62a7fe.vhd \
../../../modules/position_calc/generated/virtex6/cmpy_v5_0_fc1d91881e8e8ae6.ngc \
../../../modules/position_calc/generated/virtex6/cmpy_v5_0_fc1d91881e8e8ae6.vhd \
../../../modules/position_calc/generated/virtex6/cntr_11_0_3166d4cc5b09c744.ngc \
../../../modules/position_calc/generated/virtex6/cntr_11_0_3166d4cc5b09c744.vhd \
../../../modules/position_calc/generated/virtex6/crdc_v5_0_19fb63dead3076ad.ngc \
../../../modules/position_calc/generated/virtex6/crdc_v5_0_19fb63dead3076ad.vhd \
../../../modules/position_calc/generated/virtex6/ddc_bpm_476_066_cw.vhd \
../../../modules/position_calc/generated/virtex6/ddc_bpm_476_066.vhd \
../../../modules/position_calc/generated/virtex6/dds_cmplr_v5_0_757016b8a434f5d8.ngc \
../../../modules/position_calc/generated/virtex6/dds_cmplr_v5_0_757016b8a434f5d8.vhd \
../../../modules/position_calc/generated/virtex6/dv_gn_v4_0_e1825854b6ed410d.ngc \
../../../modules/position_calc/generated/virtex6/dv_gn_v4_0_e1825854b6ed410d.vhd \
../../../modules/position_calc/generated/virtex6/dv_gn_v4_0_f359164f94f65852.ngc \
../../../modules/position_calc/generated/virtex6/dv_gn_v4_0_f359164f94f65852.vhd \
../../../modules/position_calc/generated/virtex6/fifo_generator_virtex6_8_4_5960d79e895706a2.ngc \
../../../modules/position_calc/generated/virtex6/fifo_generator_virtex6_8_4_5960d79e895706a2.v \
../../../modules/position_calc/generated/virtex6/fifo_generator_virtex6_8_4_5960d79e895706a2.vhd \
../../../modules/position_calc/generated/virtex6/fr_cmplr_v6_3_0c61ac74cf3e5cc7.ngc \
../../../modules/position_calc/generated/virtex6/fr_cmplr_v6_3_0c61ac74cf3e5cc7.vhd \
../../../modules/position_calc/generated/virtex6/fr_cmplr_v6_3_51c8a9a7f4af2b84.ngc \
../../../modules/position_calc/generated/virtex6/fr_cmplr_v6_3_51c8a9a7f4af2b84.vhd \
../../../modules/position_calc/generated/virtex6/fr_cmplr_v6_3_95e3c24666ebc2c9.ngc \
../../../modules/position_calc/generated/virtex6/fr_cmplr_v6_3_95e3c24666ebc2c9.vhd \
../../../modules/position_calc/generated/virtex6/fr_cmplr_v6_3_d5f4b3c608d95215.ngc \
../../../modules/position_calc/generated/virtex6/fr_cmplr_v6_3_d5f4b3c608d95215.vhd \
../../../modules/position_calc/generated/virtex6/fr_cmplr_v6_3_ef8269b30b0e0deb.ngc \
../../../modules/position_calc/generated/virtex6/fr_cmplr_v6_3_ef8269b30b0e0deb.vhd \
../../../modules/position_calc/generated/virtex6/mult_11_2_6d8e463c710483da.ngc \
../../../modules/position_calc/generated/virtex6/mult_11_2_6d8e463c710483da.vhd \
../../../modules/position_calc/generated/virtex6/nonleaf_results.vhd \
../../../modules/position_calc/generated/virtex6/perl_results.vhd \
../../../modules/position_calc/generated/virtex6/xlpersistentdff.ngc \
../../../modules/wb_un_cross/cross_uncross_core/un_cross_top.vhd \
../../../modules/wb_un_cross/cross_uncross_core/swap_cnt_top.vhd \
../../../modules/wb_un_cross/cross_uncross_core/rf_ch_swap.vhd \
../../../modules/wb_un_cross/cross_uncross_core/inv_ch.vhd \
../../../modules/wb_un_cross/cross_uncross_core/delay_inv_ch.vhd \
../../../modules/wb_un_cross/cross_uncross_core/inv_chs_top.vhd \
../../../modules/wb_un_cross/cross_uncross_core/dyn_mult_2chs.vhd \
../../../platform/virtex6/chipscope/icon_1_port/chipscope_icon_1_port.ngc \
../../../platform/virtex6/chipscope/icon_2_port/chipscope_icon_2_port.ngc \
../../../platform/virtex6/chipscope/icon_1_port/chipscope_icon_1_port.vhd \
../../../platform/virtex6/chipscope/icon_2_port/chipscope_icon_2_port.vhd \
../../../platform/virtex6/chipscope/ila/chipscope_ila.ngc \
../../../platform/virtex6/chipscope/ila/chipscope_ila.vhd \
../../../platform/virtex6/chipscope/vio/chipscope_vio_256.ngc \
../../../platform/virtex6/chipscope/vio/chipscope_vio_256.vhd \
../../../platform/virtex6/ip_cores/multiplier_16x16_DSP.ngc \
../../../platform/virtex6/ip_cores/multiplier_16x16_DSP.vhd \
../../../platform/virtex6/ip_cores/multiplier_u32xs16_s32.vhd \
../../../platform/virtex6/ip_cores/multiplier_u32xs16_s32.ngc \
../../../platform/virtex6/ip_cores/dc_adder.vhd \
../../../platform/virtex6/ip_cores/dc_adder.ngc \
../../../platform/virtex6/ip_cores/dds_beam_position.vhd \
../../../platform/virtex6/ip_cores/dds_beam_position.ngc \
../../../platform/virtex6/ip_cores/dds_carrier.ngc \
../../../platform/virtex6/ip_cores/dds_carrier.vhd \
../../../platform/virtex6/ip_cores/dds_adc_input.ngc \
../../../platform/virtex6/ip_cores/dds_adc_input.v \
../../../ip_cores/general-cores/modules/common/gencores_pkg.vhd \
../../../ip_cores/general-cores/modules/common/gc_crc_gen.vhd \
../../../ip_cores/general-cores/modules/common/gc_moving_average.vhd \
../../../ip_cores/general-cores/modules/common/gc_extend_pulse.vhd \
../../../ip_cores/general-cores/modules/common/gc_ext_pulse_sync.vhd \
../../../ip_cores/general-cores/modules/common/gc_delay_gen.vhd \
../../../ip_cores/general-cores/modules/common/gc_dual_pi_controller.vhd \
../../../ip_cores/general-cores/modules/common/gc_reset.vhd \
../../../ip_cores/general-cores/modules/common/gc_serial_dac.vhd \
../../../ip_cores/general-cores/modules/common/gc_sync_ffs.vhd \
../../../ip_cores/general-cores/modules/common/gc_arbitrated_mux.vhd \
../../../ip_cores/general-cores/modules/common/gc_pulse_synchronizer.vhd \
../../../ip_cores/general-cores/modules/common/gc_pulse_synchronizer2.vhd \
../../../ip_cores/general-cores/modules/common/gc_frequency_meter.vhd \
../../../ip_cores/general-cores/modules/common/gc_rr_arbiter.vhd \
../../../ip_cores/general-cores/modules/common/gc_prio_encoder.vhd \
../../../ip_cores/general-cores/modules/common/gc_word_packer.vhd \
../../../ip_cores/general-cores/modules/common/gc_big_adder.vhd \
../../../ip_cores/general-cores/modules/genrams/genram_pkg.vhd \
../../../ip_cores/general-cores/modules/genrams/memory_loader_pkg.vhd \
../../../ip_cores/general-cores/modules/genrams/generic_shiftreg_fifo.vhd \
../../../ip_cores/general-cores/modules/genrams/inferred_sync_fifo.vhd \
../../../ip_cores/general-cores/modules/genrams/inferred_async_fifo.vhd \
../../../ip_cores/general-cores/modules/wishbone/wishbone_pkg.vhd \
../../../ip_cores/general-cores/modules/genrams/xilinx/generic_dpram.vhd \
../../../ip_cores/general-cores/modules/genrams/xilinx/generic_dpram_sameclock.vhd \
../../../ip_cores/general-cores/modules/genrams/xilinx/generic_dpram_dualclock.vhd \
../../../ip_cores/general-cores/modules/genrams/xilinx/generic_simple_dpram.vhd \
../../../ip_cores/general-cores/modules/genrams/xilinx/generic_spram.vhd \
../../../ip_cores/general-cores/modules/genrams/xilinx/gc_shiftreg.vhd \
../../../ip_cores/general-cores/modules/genrams/xilinx/virtex6/v6_fifo_pkg.vhd \
../../../ip_cores/general-cores/modules/genrams/xilinx/virtex6/v6_hwfifo_wrapper.vhd \
../../../ip_cores/general-cores/modules/genrams/xilinx/virtex6/generic_async_fifo.vhd \
../../../ip_cores/general-cores/modules/genrams/xilinx/virtex6/generic_sync_fifo.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_async_bridge/wb_async_bridge.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_async_bridge/xwb_async_bridge.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_onewire_master/wb_onewire_master.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_onewire_master/xwb_onewire_master.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_onewire_master/sockit_owm.v \
../../../ip_cores/general-cores/modules/wishbone/wb_i2c_master/i2c_master_bit_ctrl.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_i2c_master/i2c_master_byte_ctrl.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_i2c_master/i2c_master_top.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_i2c_master/wb_i2c_master.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_i2c_master/xwb_i2c_master.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_bus_fanout/xwb_bus_fanout.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_dpram/xwb_dpram.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_gpio_port/wb_gpio_port.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_gpio_port/xwb_gpio_port.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_simple_timer/wb_tics.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_simple_timer/xwb_tics.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_uart/uart_async_rx.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_uart/uart_async_tx.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_uart/uart_baud_gen.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_uart/simple_uart_wb.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_uart/simple_uart_pkg.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_uart/wb_simple_uart.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_uart/xwb_simple_uart.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_vic/vic_prio_enc.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_vic/wb_slave_vic.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_vic/wb_vic.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_vic/xwb_vic.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_spi/spi_clgen.v \
../../../ip_cores/general-cores/modules/wishbone/wb_spi/spi_shift.v \
../../../ip_cores/general-cores/modules/wishbone/wb_spi/spi_top.v \
../../../ip_cores/general-cores/modules/wishbone/wb_spi/wb_spi.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_spi/xwb_spi.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_spi_bidir/spi_bidir_clgen.v \
../../../ip_cores/general-cores/modules/wishbone/wb_spi_bidir/spi_bidir_defines.v \
../../../ip_cores/general-cores/modules/wishbone/wb_spi_bidir/spi_bidir_shift.v \
../../../ip_cores/general-cores/modules/wishbone/wb_spi_bidir/spi_bidir_top.v \
../../../ip_cores/general-cores/modules/wishbone/wb_spi_bidir/wb_spi_bidir.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_spi_bidir/xwb_spi_bidir.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_spi_bidir/timescale.v \
../../../ip_cores/general-cores/modules/wishbone/wb_crossbar/sdb_rom.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_crossbar/xwb_crossbar.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_crossbar/xwb_sdb_crossbar.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_irq/wb_irq_timer.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_irq/irqm_core.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_irq/wb_irq_lm32.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_irq/wb_irq_slave.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_irq/wb_irq_master.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_irq/wb_irq_pkg.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/generated/xwb_lm32.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/generated/lm32_allprofiles.v \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_mc_arithmetic.v \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/src/jtag_cores.v \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_adder.v \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_addsub.v \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_dp_ram.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_logic_op.v \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_ram.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_shifter.v \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/platform/generic/lm32_multiplier.v \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/platform/virtex6/jtag_tap.v \
../../../ip_cores/general-cores/modules/wishbone/wb_slave_adapter/wb_slave_adapter.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_clock_crossing/xwb_clock_crossing.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_dma/xwb_dma.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_dma/xwb_streamer.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_serial_lcd/wb_serial_lcd.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_spi_flash/wb_spi_flash.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_simple_pwm/simple_pwm_wbgen2_pkg.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_simple_pwm/simple_pwm_wb.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_simple_pwm/wb_simple_pwm.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_simple_pwm/xwb_simple_pwm.vhd \
../../../ip_cores/general-cores/modules/wishbone/wbgen2/wbgen2_dpssram.vhd \
../../../ip_cores/general-cores/modules/wishbone/wbgen2/wbgen2_eic.vhd \
../../../ip_cores/general-cores/modules/wishbone/wbgen2/wbgen2_fifo_async.vhd \
../../../ip_cores/general-cores/modules/wishbone/wbgen2/wbgen2_fifo_sync.vhd \
../../../ip_cores/general-cores/modules/wishbone/wbgen2/wbgen2_pkg.vhd \
../../../ip_cores/general-cores/platform/xilinx/wb_xilinx_fpga_loader/wb_xilinx_fpga_loader.vhd \
../../../ip_cores/general-cores/platform/xilinx/wb_xilinx_fpga_loader/xwb_xilinx_fpga_loader.vhd \
../../../ip_cores/general-cores/platform/xilinx/wb_xilinx_fpga_loader/xloader_registers_pkg.vhd \
../../../ip_cores/general-cores/platform/xilinx/wb_xilinx_fpga_loader/xloader_wb.vhd \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/platform/generic/../../src/lm32_include.v \
../../../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_include.v \
../../../ip_cores/general-cores/modules/wishbone/wb_spi/spi_defines.v \
../../../ip_cores/general-cores/modules/wishbone/wb_spi/timescale.v \
run.tcl \
bpm_dsp_example.xise

#target for running simulation in the remote location
remote: __test_for_remote_synthesis_variables __send __do_synthesis __send_back
__send_back: __do_synthesis
__do_synthesis: __send
__send: __test_for_remote_synthesis_variables

__send:
		ssh $(USER)@$(SERVER) 'mkdir -p $(R_NAME)'
		rsync -Rav $(foreach file, $(FILES), $(shell readlink -f $(file))) $(USER)@$(SERVER):$(R_NAME)

__do_synthesis:
		ssh $(USER)@$(SERVER) 'cd $(R_NAME)$(CWD) && xtclsh run.tcl'

__send_back: 
		cd .. && rsync -av $(USER)@$(SERVER):$(R_NAME)$(CWD) . && cd $(CWD)

#target for removing stuff from the remote location
cleanremote:
		ssh $(USER)@$(SERVER) 'rm -rf $(R_NAME)'

